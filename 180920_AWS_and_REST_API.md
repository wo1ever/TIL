# 180920

## AWS(Amazon Web Service) 기초

### 클라우드 컴퓨팅 이해하기

지금까지 배운 기술로 못하는 것:

- 내 노트북을 꺼도 계속 실행되는 코드
- 정해진 시간에 자동으로 실행되는 코드
- 많은 자원(큰 디스크 공간, 빠른 속도, 큰 메모리 등)이 필요한 코드

클라우드 컴퓨팅?

- 공유 경제가 컴퓨팅 환경에 적용된 개념
  - 공유경제: 만약 차를 모든 사람이 소유하게 된다면 주차장도 소유해야하고, 필요한 자원들도 소유해야하는 등의 이유로 한정된 자원이 고갈되는 문제가 발생할 수 있음. 공유경제란, 그것의 남은 부분들을 여러 사람들과 공유함으로써 자원고갈 문제 등을 해결할 수도 있음.
  - 예를 들면 에어비엔비, 쏘카 등의 개념
- 컴퓨터를 사서 쓰지 않고 빌려쓰는 것의 이점?
  - 수요를 미리 예측할 필요가 없음 → 필요하면 더 빌리고 필요 없으면 반납
  - 비용 절감 → 딱 필요한 장비를 필요한 동안에만 사용, 시스템 엔지니어링 관련 인력이 줄어듬
  - 안정성 향상 → 안정적인 서버 운영에 필요한 각종 장비 불필요, 네트워크 이중화, 항온항습, 무중단 전원 공급 장치, 비상 발전기, 내진 설계된 건물, 지리적 격리, .... 등
- 단점?
  - 실제 컴퓨터가 아니고, 큰 가상컴퓨터 안에 아주 작은 가상컴퓨터들을 여러개 만들어 하나를 할당해주는 개념이어서, 보안이슈가 있음. 극단적인 경우, 서버에서 고객의 비밀번호를 처리하는 데, 다른 나라의 해커가 그것을 엿보게 될 수 있는 상황이 있었음.
  - CPU가 너무 좋아서, 컴퓨터에서 데이터들을 보내는 속도가 너무 느리다보니 효율성의 문제가 생겼음.
  - 하지만 대체로 훨씬 안정적이어서 사용해도 큰 문제 없음.

대표적인 서비스 제공자:

- 아마존 AWS (Amazon Web Services)
- 구글 GCP (Google Cloud Platform)
- 마이크로소프트 Azure

### AWS EC2 이용하여 서버 만들기

EC2? Elastic Computing Cloud

1. 지역 선택하기 > 대한민국 (한국에서 가장 빠름)

2. Services > Compute > `EC2`

3. 서버와 운영체제 고르기 `Ubuntu`

   - 우분투: 리눅스 운영체제의 한 종류, 리눅스는 사용자들이 공개된 소스를 이용하여 만들어낼 수 있음. 레고처럼 조립할 수 있음. 초보자에 맞게 조합해 놓은 것의 한 종류가 "우분투"(리눅스 초보자용 무료 배포판)
   - 우분투 데탑, 서버, 휴대폰 용 우분투, . ..등 있음.
     - 짝수 버전이 안정버전
   - 윈도우 환경에서 개발하는 대표적인 사례: 게임분야, 를 제외하고는 대체로 Unix계열을 사용함. 주로 개발을 위한 체제로는 Unix계열을 사용함. 훨씬 안정적이고 동일한 환경에서 더 빠르게 돌아가는 장점이 있음.
     - 리눅스 서버는 한 번 켜면 어지간하면 안 끔. 하지만 윈도우 환경은 지속적으로 꺼줘야 함. 서버용 운영체제로 널리 추천되는 상황은 아님.
   - 서버 운영체제와 데스크탑 운영체제가 다름
     - 서버에서는 마우스나 크롬, 윈도우 탐색기 등이 필요 없기때문에 더 가볍고 안정적이고, 보안관련 기능은 더 강력함.

4. 서버 하드웨어(instance type) 고르기 → `t2.micro`

   - cpu와 메모리를 고른 것

5. 나머지 다 기본 옵션으로 두고 `Next: Add Storage`

   - Tenancy: 다른 사람들과 공유 드라이브를 사용하는 것.

6. 디스크 고르기 > `8GB, SSD`

7. 태그 입력하기 (나중에 해도 됨)

8. 보안 설정하기 (Firewall: 방화벽)

   1. Security group name: "SSH"
   2. Description: "TCP 22"



   - Source: 0.0.0.0/0 > 세계 어디서든 접속할 수 있음.
     - 회사IP를 입력하게 되면 회사에서만 접속하게 될 수 있음.

   - 방화벽: 내가 원하는 곳에서만 들어올 수 있게 함.
     - 서버/회사/국가단위로 설정하기도 함.
     - 외부에서 들어오는 것/ 내부 망에서 외부로 나가는 것을 막기도 함.

9. 최종 검토 및 실행 > `Launch`

10. 키 파일 저장 > `Create a new key pair`

11. Elastic IP 지정하기

    1. Service > NETWORK & SECURITY > Elastic IPs > `Allocate new address`
    2. Addresses > Associate address > instance: "daitgirls"



    - 동적 IP주소: 컴퓨터가 켜져있는 동안만 ip주소를 할당하고, 꺼지면 뺏어감.
    - 컴퓨터도 켜놓고, 고유한 정적 ip를 사용하는 것은 무료.
    - 컴퓨터(instance)는 꺼놓고, ip주소를 쟁여놓는 것은 유료.
    - IPv6 PIs: 42억개의 ip주소들을 더 늘릴 수 있는 더 긴 ip주소

### 서버 접속

ssh (secure shell) 이용하여 서버 접속하기

1. 키 파일 옮기기: `mv 키파일경로 ~/.ssh`
2. 나만 읽을 수 있도록 설정: `chmod 600 키파일경로`
3. SSH 실행: `ssh -i 키파일경로 ubuntu@IP주소`
   - IPv4 Public IPd의 주소 적기
4. 접속을 끊으려면: `exit`

#### IP주소 반납하고 서버 지우기

- Networking > Disassociate Alastic IP

- Alastic IP > 가서 지우기 (release 하면 지워짐)

### 프로그램 작성하여 서버에서 실행해보기

#### 주기적으로 데이터를 수집하여 깃헙에 올리기

1. 초간단 프로그램 개발 + 깃헙에 올리기
2. 서버에서 소스코드 내려받기
3. 데이터를 저장할 디렉터리 만들기
4. 실행해보기



- `crontab -e` : 어떤 컴퓨터에 일정 시간마다 한 번씩 실행되게 함.
  - 2.nano (easiest) 선택
  - m h  dom mon dow   command
    - `* * * * *` : 매 분 실행됨.
    - `* 1 * * *` : 매 시간 실행됨.
    - `* * 1 1 *` : 매일, 매 주 실행됨.
  - `echo Hello >> /home/ubuntu/test.txt` : Hello를 출력하는 것을 저 경로의 폴더에 넣는데, >: 덮어쓰기 >>: 한줄씩 추가하기
  - `crontab -e` : 켜서 편집하고, ^(control)+X > Y > 엔터



## REST API 활용하기

### 4 basic HTTP verbs

[codecademy](https://www.codecademy.com/articles/what-is-rest)

- GET — retrieve a specific resource (by id) or a collection of resources
- POST — create a new resource
- PUT — update a specific resource (by id)
- DELETE — remove a specific resource by id